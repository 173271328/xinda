webpackJsonp([19],{"2HLm":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"oorder"},[t.$isPC?i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"member-right",attrs:{"element-loading-text":"加载中"}},[t._m(0),t._v(" "),i("div",{staticClass:"right2"},[i("span",{staticStyle:{"margin-left":"10px"}},[t._v("订单号：")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.srchNo,expression:"srchNo"}],attrs:{type:"text",placeholder:"请输入订单号"},domProps:{value:t.srchNo},on:{keyup:t.handleSrch,focus:function(t){t.target.select()},input:function(e){e.target.composing||(t.srchNo=e.target.value)}}}),t._v(" "),i("button",{on:{click:t.search}},[t._v("搜索")]),i("br"),t._v(" "),i("span",[t._v("创建时间：")]),t._v(" "),i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptions0},on:{change:t.dateChange},model:{value:t.startdate,callback:function(e){t.startdate=e},expression:"startdate"}})],1),t._v("\n            至\n            "),i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptions0},on:{change:t.dateChange},model:{value:t.enddate,callback:function(e){t.enddate=e},expression:"enddate"}})],1)]),t._v(" "),t._m(1),t._v(" "),t.bolist.length?t._e():i("el-alert",{attrs:{title:"没有相关订单信息。",type:"info",closable:!1,"show-icon":""}}),t._v(" "),t._l(t.bolist,function(e,a){return t.end>e.createTime?[i("div",{key:a,staticClass:"right4"},[i("p",[t._v("订单号：\n                    "),i("span",[t._v(t._s(e.businessNo))]),t._v("下单时间：\n                    "),i("span",[t._v(t._s(t.fmtTime(e.createTime)))])])]),t._v(" "),i("div",{key:e.id,staticClass:"r5div"},[i("div",{staticClass:"wrap"},t._l(t.soarr[a],function(e){return i("div",{key:e.providerId,staticClass:"right5"},[i("a",{staticClass:"imgArticle",attrs:{href:""}},[i("img",{attrs:{src:t.img[e.providerId],alt:""}})]),t._v(" "),i("div",{staticStyle:{width:"250px",height:"100px"}},[i("a",{staticClass:"site",attrs:{href:""}},[t._v(t._s(e.providerName))]),t._v(" "),i("span",{staticStyle:{display:"block","line-height":"30px","padding-bottom":"20px"},attrs:{title:e.serviceInfo}},[t._v(t._s(e.serviceName))])]),t._v(" "),i("p",{staticStyle:{width:"100px",height:"100px","text-align":"center"}},[t._v("￥\n                            "),i("span",[t._v(t._s(t.fmtPrice(e.unitPrice)))])]),t._v(" "),i("p",{staticStyle:{width:"80px",height:"100px","text-align":"center"}},[i("span",[t._v(t._s(e.buyNum))])]),t._v(" "),i("p",{staticStyle:{width:"110px",height:"100px","text-align":"center","border-left":"1px solid #ddd",color:"#2693d4"}},[t._v("￥\n                            "),i("span",[t._v(t._s(t.fmtPrice(e.totalPrice)))])]),t._v(" "),i("p",{staticClass:"form",staticStyle:{"line-height":"100px"}},[i("span",[t._v(t._s(t.STATUS[e.status]))])])])})),t._v(" "),1==e.status?i("div",{staticClass:"form form1",staticStyle:{"text-align":"center"}},[i("a",{staticStyle:{color:"#fff"},attrs:{href:"#/pay?bno="+e.businessNo}},[i("span",{staticStyle:{display:"inline-block",width:"80px",height:"35px","line-height":"35px",border:"1px solid #2693d4","border-radius":"5px",background:"#2693d4",color:"#fff"}},[t._v("\n                            付款\n                        ")])]),i("br"),t._v(" "),i("span",{staticStyle:{display:"inline-block",color:"red",cursor:"pointer","font-size":"15px"},on:{click:function(i){t.delOrder(e.id,a)}}},[t._v("删除订单")])]):t._e(),t._v(" "),1!=e.status?i("div",{staticClass:"form form1",staticStyle:{"text-align":"center"}},[i("span",{staticStyle:{display:"inline-block",color:"red",cursor:"pointer","font-size":"15px"},on:{click:function(i){t.delOrder(e.id,a)}}},[t._v("删除订单")])]):t._e()])]:t._e()}),t._v(" "),i("v-page",{attrs:{curInx:t.cur,pageSize:t.pageSize,pageChange:t.pageChange,totalShow:!0}})],2):t._e(),t._v(" "),t.$isPC?t._e():i("div",{staticClass:"mmyorder"},[i("transition",{attrs:{name:"el-zoom-in-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.tnshow,expression:"tnshow"}],staticClass:"tn"},[i("i",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v(" "),i("span",[t._v("我的订单")]),t._v(" "),i("a",{attrs:{href:"#/"}},[i("i",{staticClass:"iconfont"},[t._v("")])])])]),t._v(" "),i("div",{attrs:{id:"owrap"}},[t._l(t.bolist,function(e,a){return t.end>e.createTime?i("div",{key:a,staticClass:"ordermenu"},[i("div",{staticClass:"omtop"},[i("p",{staticClass:"tnum"},[t._v("订单号:\n                        "),i("span",[t._v(t._s(e.businessNo))])]),t._v(" "),i("p",{staticClass:"twait"},[t._v(t._s(t.STATUS[e.status]))])]),t._v(" "),t._l(t.soarr[a],function(a){return i("div",{key:a.providerId,staticClass:"ommid"},[i("img",{staticClass:"mimg",attrs:{src:t.img[a.providerId],alt:"img 404"}}),t._v(" "),i("div",{staticClass:"mdiv"},[i("b",[t._v(t._s(a.serviceName))]),t._v(" "),i("p",{staticClass:"mtime"},[t._v("下单时间：\n                            "),i("span",[t._v(t._s(t.fmtTime(e.createTime)))])]),t._v(" "),i("p",{staticClass:"mmoney"},[i("span",[t._v("￥"+t._s(t.fmtPrice(a.unitPrice)))]),t._v(" 元")]),t._v(" "),i("span",{staticClass:"mnum"},[t._v("×"+t._s(a.buyNum))])])])}),t._v(" "),i("div",{staticClass:"ombot"},[i("p",[t._v("合计:\n                        "),i("span",[t._v("￥"+t._s(t.fmtPrice(e.totalPrice)))])]),t._v(" "),i("button",{staticClass:"bdel",on:{click:function(i){t.delOrder(e.id,a)}}},[t._v("删除订单")]),t._v(" "),1==e.status?i("button",{staticClass:"bpay",on:{click:t.bpay}},[t._v("付款")]):t._e()])],2):t._e()}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.all,expression:"all"}],staticClass:"all"},[t._v("已加载完所有订单")])],2)],1)])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right1"},[i("p",[t._v("我的订单")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right3"},[i("span",{staticStyle:{width:"300px"}},[t._v("商品名称")]),t._v(" "),i("span",{staticStyle:{width:"70px"}},[t._v("单价")]),t._v(" "),i("span",{staticStyle:{width:"70px","padding-left":"12px"}},[t._v("数量")]),t._v(" "),i("span",{staticStyle:{width:"90px","padding-left":"17px"}},[t._v("总金额")]),t._v(" "),i("span",{staticStyle:{width:"90px","padding-left":"25px"}},[t._v("订单状态")]),t._v(" "),i("span",[t._v("订单操作")])])}],s={render:a,staticRenderFns:r};e.a=s},Lzky:function(t,e,i){var a=i("lad6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("0d02a858",a,!0)},Mk6H:function(t,e,i){"use strict";e.a={created:function(){this.$isPC||(this.pdata.limit=0),this.getBOrder()},data:function(){return{startdate:"",enddate:"",end:Date.now(),pickerOptions0:{disabledDate:function(t){return t.getTime()>Date.now()}},srchNo:"",cur:1,pageSize:0,pdata:{businessNo:"",startTime:"",endTime:"",start:0,limit:6},bolist:[],soarr:[],img:{a7304eecbd7246b4b424874e0359eab0:"http://115.182.107.203:8088/xinda/pic/2016/09/28/8c419db3f572418a80ff5a08397fb857","9080f0c120a64eb3831d50ba93c33e78":"http://115.182.107.203:8088/xinda/pic/2016/09/23/58152db2c9b940c385e442ffe12cfe20"},STATUS:{1:"未付款",2:"待接单",3:"服务中",4:"已完成待结算",5:"结算申请中",6:"已结算",7:"异常订单"},loading:1,all:!1,ticking:!1,tnshow:!0}},methods:{back:function(){window.history.back()},fmtPrice:function(t){return(.01*parseFloat(t)).toFixed(2)},fmtTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()<9?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate()+" "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()},pageChange:function(t){window.scrollTo(0,0),this.cur=t,this.pdata.start=(t-1)*this.pdata.limit,this.getBOrder()},handleSrch:function(){13==event.keyCode&&this.search()},dateChange:function(){this.startdate||this.enddate||(this.pdata.businessNo="",this.pdata.startTime="",this.pdata.endTime="",this.end=Date.now(),this.getBOrder())},search:function(){this.srchNo||this.startdate||this.enddate?(this.pdata.businessNo=this.srchNo,this.pdata.startTime=this.startdate?this.fmtTime(new Date(this.startdate)).substr(0,10):"",this.end=isNaN(Date.parse(this.enddate))?Date.now():Date.parse(this.enddate),this.getBOrder()):this.$message.warning("请输入订单号或选择创建时间")},getBOrder:function(){var t=this;this.$isPC?this.loading=!0:(this.$indicator.open(),this.pdata.limit+=6),this.$ajax.post("/xinda-api/business-order/grid",this.pdata).then(function(e){e.data.data.length?(t.pageSize=e.data.pageSize,t.bolist=e.data.data.sort(function(t,e){return e.createTime-t.createTime}),t.$isPC||(t.all=t.pdata.limit>t.bolist.length),t.soarr=[],t.getsoarr()):t.loading=!1}).catch(function(e){e.response?400==e.response.status&&(t.$isPC?t.loading=!1:t.$indicator.close(),t.$isPC?t.$message("请输入正确的订单号"):t.$toast("请输入正确的订单号")):console.log("ERROR:",e.message)})},getsoarr:function(){for(var t=this,e=this.bolist,i=e.length,a=0;a<i;a++){var r;!function(a){r=e[a].businessNo,t.$ajax.post("/xinda-api/service-order/grid",{businessNo:r,startTime:"",endTime:"",start:0}).then(function(e){e.data.data&&(t.soarr.push(e.data.data),t.soarr=t.soarr.sort(function(t,e){return e[0].createTime-t[0].createTime}),a==i-1&&(t.$isPC?t.loading=!1:t.$indicator.close()))})}(a)}},delOrder:function(t,e){var i=this;this.$isPC?this.$confirm("确定删除该订单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",lockScroll:!1}).then(function(){i.$ajax.post("/xinda-api/business-order/del",{id:t}).then(function(t){1==t.data.status?(i.bolist.splice(e,1),i.soarr.splice(e,1),i.$message.success(t.data.msg)):i.$message.warning(t.data.msg)}).catch(function(t){console.error(t)})}).catch(function(){i.$message({type:"info",message:"已取消删除"})}):this.$messagebox.confirm("确定删除该产品吗?").then(function(a){i.$ajax.post("/xinda-api/business-order/del",{id:t}).then(function(t){1==t.data.status?(i.bolist.splice(e,1),i.soarr.splice(e,1),i.$toast(t.data.msg)):i.$toast(t.data.msg)}).catch(function(t){console.error(t)})}).catch(function(){})},bpay:function(){this.$toast("目前仅支持微信支付,请在微信浏览器打开")},scrollf:function(){var t=o.clientHeight,e=o.scrollHeight;t+o.scrollTop===e&&this.pdata.limit===this.bolist.length&&this.$route.path.indexOf("Order")>-1&&this.getBOrder()},wheelf:function(t){t=t||window.event,t.wheelDelta?(t.wheelDelta>0&&(this.tnshow=!0),t.wheelDelta<0&&(this.tnshow=!1)):t.detail&&(t.detail>0&&(this.tnshow=!0),t.detail<0&&(this.tnshow=!1))}},mounted:function(){var t=this;this.$isPC||(window.o=document.getElementById("owrap"),o.addEventListener("scroll",function(){t.ticking||requestAnimationFrame(function(){t.scrollf(),t.ticking=!1}),t.ticking=!0}))},watch:{srchNo:function(t){""==t&&(this.pdata.businessNo="",this.pdata.startTime="",this.pdata.endTime="",this.getBOrder())}}}},gctV:function(t,e,i){"use strict";function a(t){i("Lzky")}Object.defineProperty(e,"__esModule",{value:!0});var r=i("Mk6H"),s=i("2HLm"),o=i("VU/8"),n=a,d=o(r.a,s.a,n,"data-v-6cbe2781",null);e.default=d.exports},lad6:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"button[data-v-6cbe2781]{outline:none}.member-right[data-v-6cbe2781]{width:934px;display:inline-block}.member-right .right1[data-v-6cbe2781]{width:900px;height:36px;border-bottom:2px solid #ddd;margin:25px 0}.member-right .right1 p[data-v-6cbe2781]{width:85px;padding:5px 15px;font-size:20px;color:#2693d4;border-bottom:2px solid #2693d4}.member-right .right2[data-v-6cbe2781]{height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.member-right .right2 .block[data-v-6cbe2781]{width:200px;margin:0 10px}.member-right .right2 .block .el-input__inner[data-v-6cbe2781]{width:200px}.member-right .right2 span[data-v-6cbe2781]{display:inline-block;width:82px;height:50px;line-height:49px}.member-right .right2 input[data-v-6cbe2781]{width:270px;height:32px;padding-left:10px;font-size:15px}.member-right .right2 button[data-v-6cbe2781]{margin-left:20px;padding-bottom:2px;width:100px;height:34px;font-size:16px;color:#fff;background:#2693d4;border:0;border-radius:7px;margin-right:420px}.member-right .right3[data-v-6cbe2781]{height:40px;line-height:40px;background:#f7f7f7;font-weight:600;font-size:15px}.member-right .right3 span[data-v-6cbe2781]{display:inline-block;padding-left:48px}.member-right .right4[data-v-6cbe2781]{height:40px;background:#f7f7f7;margin-top:10px;border:1px solid #ddd}.member-right .right4 p[data-v-6cbe2781]{display:block;padding-left:20px;line-height:40px}.member-right .right4 p span[data-v-6cbe2781]{display:inline-block;width:200px}.member-right .right5[data-v-6cbe2781]{width:800px;border:1px solid #ddd;border-right:0;border-top:0;display:-webkit-box;display:-ms-flexbox;display:flex}.member-right .right5 p[data-v-6cbe2781]{display:inline-block;height:100px;text-align:center;line-height:100px;margin:0}.member-right .right5 .imgArticle[data-v-6cbe2781]{display:inline-block;width:80px;height:58px;border:1px solid #ddd;margin:20px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.member-right .right5 .imgArticle img[data-v-6cbe2781]{width:100%}.member-right .right5 .site[data-v-6cbe2781]{display:block;margin-top:10px;height:40px;line-height:40px;text-decoration:none;color:#000;font-size:18px}.member-right .right5 span[data-v-6cbe2781]{width:250px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.r5div[data-v-6cbe2781]{display:-webkit-box;display:-ms-flexbox;display:flex}.form[data-v-6cbe2781]{width:145px;color:#2693d4;border-left:1px solid #ddd;border-top:0}.form1[data-v-6cbe2781]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid #ddd;border-top:0}.el-alert[data-v-6cbe2781]{width:300px!important;margin:70px auto 200px!important}.page-bar[data-v-6cbe2781]{margin-top:40px;text-align:center}.page-bar button[data-v-6cbe2781]{margin:0!important}.mmyorder[data-v-6cbe2781]{width:100%;font-size:.16rem}.mmyorder .tn[data-v-6cbe2781]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:.5rem;line-height:.5rem;color:#666;font-size:.16rem;background:#f6f6f6}.mmyorder .tn i[data-v-6cbe2781]{margin-top:4.5%;margin-left:5%}.mmyorder .tn i[data-v-6cbe2781]:last-child{margin-right:.3rem;font-size:.27rem}.mmyorder .tn span[data-v-6cbe2781]{display:inline-block;width:25%;margin:0 auto;text-align:center}.mmyorder .tn a[data-v-6cbe2781]{text-decoration:none}.mmyorder .ordermenu[data-v-6cbe2781]:last-child{margin-bottom:.6rem}.mmyorder .ordermenu .omtop[data-v-6cbe2781]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:4%;margin-bottom:4%}.mmyorder .ordermenu .omtop .tnum[data-v-6cbe2781]{margin-left:5%}.mmyorder .ordermenu .omtop .twait[data-v-6cbe2781]{min-width:20%;margin-right:5%;text-align:right}.mmyorder .ordermenu .ommid[data-v-6cbe2781]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#f6f6f6;padding-top:5%;padding-bottom:5%}.mmyorder .ordermenu .ommid .mimg[data-v-6cbe2781]{display:block;margin-left:5%;width:.83rem;height:.83rem;border:1px solid #666}.mmyorder .ordermenu .ommid .mdiv[data-v-6cbe2781]{margin-left:3%}.mmyorder .ordermenu .ommid .mdiv .mtime[data-v-6cbe2781]{margin-top:3%}.mmyorder .ordermenu .ommid .mdiv .mmoney[data-v-6cbe2781]{margin-top:4%}.mmyorder .ordermenu .ommid .mdiv .mmoney span[data-v-6cbe2781]{color:red;font-size:.25rem}.mmyorder .ordermenu .ommid .mdiv .mnum[data-v-6cbe2781]{display:block;margin-top:-.32rem;margin-left:1.5rem;font-size:.25rem}.mmyorder .ordermenu .ombot[data-v-6cbe2781]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;margin-top:.1rem;padding-bottom:.1rem;border-bottom:15px solid #ddd}.mmyorder .ordermenu .ombot p span[data-v-6cbe2781]{color:red}.mmyorder .ordermenu .ombot .bdel[data-v-6cbe2781]{color:red;background:0;border:0;margin-left:20%}.mmyorder .ordermenu .ombot .bpay[data-v-6cbe2781]{width:.55rem;color:#fff;background-color:#2595d0;border:0;border-radius:2px;margin-left:-2%}#owrap[data-v-6cbe2781]{height:90vh;overflow-y:auto}.all[data-v-6cbe2781]{margin-top:.2rem;font-size:.16rem;color:#999;text-align:center}@media screen and (max-width:768px){.oorder[data-v-6cbe2781]{width:100%;height:90vh;position:fixed;top:0;left:0;background-color:#f2f2f2;overflow-y:auto}}",""])}});